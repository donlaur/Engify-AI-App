# AI Guardrails - CRITICAL RULES

## Database Operations - NEVER WITHOUT EXPLICIT PERMISSION

### FORBIDDEN Operations (require explicit user approval):
- ❌ `deleteMany()` on any collection
- ❌ `drop()` on any collection
- ❌ `dropDatabase()`
- ❌ Any script that clears/resets data
- ❌ Modifying backup files
- ❌ Running migration scripts that delete data

### REQUIRED Before Any Database Modification:
1. **Check backups first** - Always look in `/backups` directory
2. **Ask permission** - "This will modify the database. Proceed?"
3. **Show what will change** - List affected records/collections
4. **Create backup** - Run backup script before modifications
5. **Verify after** - Confirm data is still intact

### Safe Operations (no approval needed):
- ✅ Reading/querying data
- ✅ Inserting new records (not replacing existing)
- ✅ Updating specific fields with user confirmation
- ✅ Creating backups

## Critical Collections (EXTRA PROTECTION):
- `users` - User accounts (NEVER delete without explicit permission)
- `prompts` - 296 prompts (restored from JSON if missing)
- `patterns` - 18 patterns (restored from JSON if missing)
- `bug_reports` - User-submitted bugs
- `learning_resources` - Educational content

## Before Running ANY Script:
1. Read the script completely
2. Identify all database operations
3. Check if it modifies/deletes data
4. Ask user: "This script will [describe changes]. Proceed?"
5. Wait for explicit "yes" or "proceed"

## Backup Strategy:
- Backups stored in `/backups` directory
- Check backup dates before claiming data "never existed"
- Use backups to verify historical state
- Create new backup before risky operations

## If Data Goes Missing:
1. Check `/backups` directory first
2. Check `public/data/*.json` (ISR cache from DB)
3. Admit if AI caused the issue
4. Restore from backup immediately
5. Document what happened

## Red Flags - STOP and ASK:
- Any script with "delete", "drop", "clear", "reset" in name
- Any script that connects to MongoDB and doesn't just read
- Any operation on production collections
- Any modification to existing user accounts

## User's Rule:
**"I am the sole founder. There should always be at least ONE user (donlaur@engify.ai) in the database. If it's missing, something went wrong."**

---

**REMEMBER: When in doubt, ASK. Never assume it's safe to delete data.**
